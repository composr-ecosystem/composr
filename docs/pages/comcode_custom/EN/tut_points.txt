[title sub="Written by Chris Graham (ocProducts)"]Composr Tutorial: Creating an economy/reward-system for members via points[/title]

[media width="150" description="A logged-in member may see their points from the header" float="right"]data_custom/images/docs/tut_points/points_block.png[/media]
{!points:DOC_POINTS}

[contents]decimal,lower-alpha[/contents]

[title="2"]Earning points[/title]

[media width="150" description="Configuring the points balance" float="right"]data_custom/images/docs/tut_points/points_config.png[/media]
[media width="150" description="The points tab on a member's profile ([concept]Conversr[/concept])" float="right"]data_custom/images/docs/tut_points/points_page.png[/media]
There are many ways to earn points in Composr. You may not wish to educate your members on the precise details of these, although of course they could educate themselves by reading this tutorial.

Methods of earning points include:
 - Joining
 - Visiting the site
 - A daily stipend ('Universal Basic Income')
 - Voting in a poll
 - Rating content
 - Having your content being liked
 - Poll being chosen
 - Submitting various forms of content (See &ldquo;A note about points and content validation&rdquo;)
 - Posting on the forum (see &ldquo;A note about forum points&rdquo;)
 - Posting in a chat room
 - Entering/passing quizzes
 - Recommended the website to others
 - Receiving points from other members (this is described in a later section)
 - Earning points from selling a download (this is described in a later section)
 - Birthdays (see &ldquo;A note about birthday points&rdquo;)

Most methods of earning points may be altered in the configuration (Admin Zone > Setup > Configuration > Points options), so that the number of points earned from various activities is appropriate for your website.

There is a distinction between the point count for points available for spending ([concept]points balance[/concept]), and the point count for the total points ever earned (which contributes to rank and leader-board position) ([concept]life-time points[/concept]). This will usually be made explicit, but sometimes context will let users easily identify what is the appropriate meaning.

[title="3"]A note about points and content validation[/title]

The earning of points for submitted content can be considered encouragement for participation more than as a judgement on the particular quality for that content. Therefore points are credited as soon as content is submitted, regardless of validation. Points can always be reversed by ticking (checking) the &ldquo;Reverse point transaction&rdquo; box when editing/deleting content.

Forum posts are treated differently to other content, due to the prevalent problem of spam. Spam is not just low quality content (which is common and allowed on most forums), it is intentional abuse of the website. Therefore, when a submitted forum post requires validation, points will not be credited until the post is validated. If you want to encourage high quality content with points, the awards addon can be utilised to award high-quality content and subsequently credit the awardee some points.

[title="3"]A note about forum points[/title]

For Conversr, points are awarded immediately when a post is made, and points can be reversed via a tickbox (checkbox) when deleting posts or topics. Note that points are not awarded for anonymous posts, whispers, nor posts in private topics because it would cause a privacy leak in the points ledger.

For all other forums, because the forum driver cannot directly communicate with Composr, points are instead awarded daily via the system scheduler based on the change in post count. Note that points will never be debited if the post count goes down; moderators should manually charge members to resolve discrepancies.

[title="3"]A note about birthday points[/title]

If birthday points is set to greater than 0, then members and staff cannot edit their own birthdays once they set it. This is to prevent birthday point abuse. Members should contact a staff member if they made a mistake in their birthday. Staff members would have to contact a different staff member as they cannot edit their own birthdays.

[title="2"]Sending points[/title]

[surround]
[media width="150" description="The points ledger should be monitored so as to pick up on cheating and abuse" float="right"]data_custom/images/docs/tut_points/points_admin_monitor.png[/media]
[media width="150" description="Those who send points may get randomly rewarded by the system if gift points is enabled (this encourages an active community)" float="right"]data_custom/images/docs/tut_points/points_lucky.png[/media]
[concept]Point-sending[/concept] allows members to reward each other.
[concept]Points escrow[/concept] allows members to exchange points for some form of written agreement (which can relate to an outside purchase or service as an example). Like money can be used to pay someone, so can points, based on whatever they value. This economical situation is very important, and essentially capitalism is embodied, such that people go hunting for work that is valued most highly in order to get high returns of points. Furthermore, since points are held escrow in the system until both parties confirm the written agreement has been met, this ensures trust in the points exchange. Should an issue arise, one of the members can dispute the escrow, and someone with the &ldquo;Moderate points escrowed&rdquo; privilege can review it.

Some reasons someone might send points include:
 - Payment for a product or service provided (usually via points escrow)
 - A prize for winning a competition
 - A sign of appreciation for producing a high quality product or piece of content that benefits the community

To send or escrow points to another member, visit their profile and go in their points tab. There will be a form to send points and a separate form to escrow points. Members must have the &ldquo;Send points to other members&rdquo; privilege to send points to other members, and they must have the &ldquo;Escrow points to others&rdquo; privilege to hold points in escrow for another member. The member being sent or escrowed points must also have the &ldquo;Use points&rdquo; privilege to be sent or escrowed points.

Members may not send points to themselves unless they have the &ldquo;Send points to self&rdquo; privilege.

[title="3"]Gift points (advanced)[/title]

By default, members have a single point balance that they can use both to spend on things and to send to other members (if they have the &ldquo;Send points to other members&rdquo; privilege). However, website administrators can enable a separate gift points balance by ticking (checking) the &ldquo;Enable gift points&rdquo; configuration option (under Admin Zone > Setup > Configuration > Points options > Gift points).

[concept]Gift points[/concept] (when enabled) are a separate point balance allowing members to send points without affecting their regular points balance. Gift points cannot be spent on anything; they can only be sent to others. Gift points become regular spendable points for recipients when they are sent. Members receive a configurable amount of gift points per day that they can send to others based on which usergroups they are in. When a member tries to send more points than they have in gift points, the remainder will be deducted from their regular points balance. Confirmation screens ensure the member understands how their points will be distributed.

For example, member A has 100 points and 25 gift points. They can spend their 100 points on things, but they cannot spend their 25 gift points. Member A wants to give Member B 50 points. Since member A only has 25 gift points, the other 25 points will be deducted from their regular points. Therefore, after the transaction, member A will have 75 regular points and 0 gift points. And member B will receive 50 regular points which they can spend.

When gift points are enabled, members can be randomly rewarded for sending points to others. The amount rewarded and the chance of being rewarded can be configured (Admin Zone > Setup > Configuration > Points options > Gift points). Only non-anonymous transactions will qualify for this random lottery.

[title="3"]Points escrow[/title]

Members can also send each other points through the escrow system. This is commonly used when exchanging points with a written agreement, such as for a product or service.

To escrow points to another member, go to their points profile and click the &ldquo;Send via Escrow&rdquo; button. A form loads where you can specify the number of points to escrow, the reason (short and concise explanation of what is being exchanged with the points, such as the product or service), the expiration (deadline) if applicable, and the written agreement associated with the escrow. Only those with the &ldquo;Escrow points to others&rdquo; privilege can escrow points to others, which is enabled by default for all usergroups.

Once an escrow is created, the points will be deducted from the escrower's balance and held in the system. The other member will be notified that an escrow was created along with the written agreement. Once the agreement has been satisfied, both members must mark the escrow agreement as satisfied on the escrow screen. When that happens, the recipient member receives the escrowed points.

If an issue arises with the escrow, either member can dispute the escrow and provide a message explaining the dispute. When an escrow is disputed, those with the &ldquo;Moderate points escrowed&rdquo; privilege will be notified, and one of them can take an action. The action could be cancelling the escrow / returning the points back to the original member, marking the escrow as satisfied and giving all the points to the escrowed member, only crediting a partial amount of points to the recipient and returning the rest to the sender, or amending the text / agreement on the escrow. An escrow will also automatically be disputed by the system if only one member marked it as satisfied and the escrow expires.

Be aware that those with the &ldquo;Moderate points escrowed&rdquo; privilege cannot moderate escrows in which they are the sender or recipient; someone else with the privilege must resolve any disputes with that escrow.

If an escrow expires and neither member marked it as satisfied nor disputed, then the escrow is cancelled and the points returned to the original member.

Escrows can be viewed in a table on each member's points profile. Only those with the &ldquo;Moderate points escrowed&rdquo; privilege can see all escrows. Otherwise, members can only see escrows in which they were either the sender or recipient.
[/surround]

[title="2"]Point transaction notifications[/title]

There exists two types of notifications for point transactions: &ldquo;Your points transactions&rdquo; (available to all members) and &ldquo;Others' points transactions&rdquo; (available to staff). Notifications are generally only dispatched for the mentioned types when these conditions hold true:
 - Transactions happening which the recipient would not otherwise reasonably know happened. For example:
  - transactions from other members
  - transactions sent by the system scheduler
  - transactions that are highly-tangential to an action the recipient is doing, yet are of significance (for example, getting points for a content submission)
 - When other notifications are not going to be sent to you at the same time (for example, the &ldquo;Your content was liked&rdquo; notification would mention credited points, and no other notifications would be sent)

Transactions might not be delivered as a notification at all if they are insignificant (e.g. chat message points) or the member would reasonably know they would earn points (e.g. daily points). Members can regularly check their points profile to monitor their points.

[title="2"]Viewing the points ledger[/title]

The full points ledger is accessible in the Admin Zone > Audit > Points ledger. There, you can see all of the points transactions that occurred on the website. Additionally, members can view each other's point transactions on their points profiles. Be aware that anonymous transactions will not show for members not involved in them (unless the member has the &ldquo;Trace the origin of anonymous point transactions&rdquo; privilege). Therefore, the total tally of a member's points received or sent may be higher than what the visible ledger sums to on a member's profile, but it will never be lower.

[title="2"]Modifying points[/title]

Those with the &ldquo;Moderate members' points&rdquo; privilege will see a &ldquo;Modify points&rdquo; box on member points profiles instead of &ldquo;Send points&rdquo;. This allows them to indirectly modify the points of others. A drop-down will be provided which allows, in addition to the sending of points, these actions:
 - [b]Credit[/b]: Credit (add) points to a member from the system. An example is to refund them for an outside purchase, or to reward them for something on behalf of the website.
 - [b]Debit[/b]: Debit (remove) points from a member to the system. An example is when a member makes a purchase outside of eCommerce and points escrow, or when they are being punished outside of a warning.

Crediting or debiting points, just like sending points, will create a new transaction visible in the ledger. It will also send a notification to the member (if they have the &ldquo;Your points transactions&rdquo; notification enabled).

[title="2"]Modifying point transactions[/title]

There are two permissible edit actions for point transactions: reversing a transaction, and amending the reason text.

When you [concept]reverse[/concept] a transaction, that involves creating a new transaction that offsets the original one. For example, Bob sends Sue 50 points in the form of 25 gift points and 25 regular points. When reversing this, a new transaction will be created where Sue sends back 50 regular points to Bob, and Bob receives them as 25 gift points and 25 regular points. The two transactions will also be linked together so the ledger displays that one reversed the other. Escrow cancellations and undoing warning charges work in the same way. To reverse a transaction, those with the &ldquo;Moderate members' points&rdquo; privilege can click the &ldquo;Undo&rdquo; icon in the actions column next to a point transaction either in the ledger or on a member's points profile. If you reverse a points transaction created from an escrow, the escrow will also automatically be cancelled.

The &ldquo;reason&rdquo; text for the ledger is the only thing that can be amended in a transaction. Those with the &ldquo;Amend reason on point transactions&rdquo; privilege can either use the Points ledger (Admin Zone > Audit > Points ledger) or the transactions on a member's points profile to amend the reason text.

[title="3"]A note about points refunds (advanced)[/title]

There exists an API method to [concept]refund[/concept] any amount of points (such as a partial refund). This is a low-level method and, to avoid competition/confusion with transaction reversal, is not available for direct UI use. The method is indirectly used in two places: points escrow moderation (when completing an escrow but specifying only a partial amount to be credited to the recipient; the rest are refunded back to the sender) and points transaction reversal (as the mechanism for refunding the points).

[title="2"]Other economy tie-ins[/title]

[title="3"]Voting power in Topic Polls[/title]

Site administrators can enable the ability to weigh poll votes on Conversr Topic Polls based on the number of points a voter had at the time of voting. This means members with more points have a greater effect / voting power on a poll's results when they vote. 

This is covered more in-depth on the [page="_SEARCH:tut_forums"]Forums page[/page].

[title="3"]Buildr (non-bundled)[/title]

Buildr is a very large addon for Composr, made by the developers in a semi-official capacity. It is not included with the main release as it is totally inappropriate for non-community sites, and hence would be consider as 'bloat' (an excessive feature that gets in the way and causes undue complexity and confusion) by most.

Buildr is essentially a game, where members may move in, interact with, and create, a limitless world of rooms, split across multiple themed 'realms'. It can be used to create puzzles, adventures, board games, simulations, and with imagination, many other things.

Points are at the very core of Buildr, and are used in two ways:
1) It costs points (according to a configurable price) to add content to Buildr. Of course, members may try and redeem these points by asking members to send points back to them, but this feature prevents abuse and limits the need for moderation.
2) Members may add items to the system, and then sell these items to other members. An example of this being used, is for the controller of a realm used for a 'quest' to add a 'healthy' item into the system: those with more points have a higher chance of surviving to the end of the quest, as they can heal themselves.

The Buildr system is very simple, yet via the small set of options available, presents amazing possibilities.

[title="3"]Downloads[/title]

Members may submit downloads that cost points to download. Depending on how the submitter configures the download, these points may end up with that submitter, or thrown away.
This system allows:
 - staff to artificially limit access to ensure members participate before they can use site resources.
 - members to earn points to compensate themselves for the work contained within a download.

This is covered in the [page="_SEARCH:tut_adv_downloads"]Advanced provision of downloads[/page] tutorial.

[title="3"]The real world[/title]

A small number of sites may wish to set up a system to allow members to exchange points for real money, or tangible products or services. Sites that may wish to do this are likely to be sites where the earning of points has a real effect on business goals, such that real-world reimbursement may be appropriate; for example, on a site where members collaborate on art for a published catalogue.

Alternatively, and perhaps more popularly, sites may allow members to exchange real money, for points. Hence web-masters could earn money from their more enthusiastic members, and those members could elevate themselves on the website.

The eCommerce addon allows setting up custom products that may be purchased in either real currency or in points. It is flexible enough to allow the above scenarios, although it would require either doing the conversions (e.g. crediting a member with more points after they buy some) by hand, or some custom coding.

[title="2"]Rank in Conversr[/title]

[surround]
[media width="150" description="Rank ladder shown in the usergroup directory" float="right"]data_custom/images/docs/tut_points/rank.png[/media]
[media width="150" description="Rank configured when editing a usergroup" float="right"]data_custom/images/docs/tut_points/rank_options.png[/media]
[concept]Conversr[/concept] has a usergroup system that allows automated progression from one usergroup to another, according to point count. This is configured by default such that the usergroup rank images for the usergroups involved imply a rising rank.

The 'status symbol' of rank is an incentive for members to earn points (hence contributing to the site and community), but permissions may also be configured such as to give permission according to rank, simply by assigning the permissions differently for different usergroups.

If you would like to use rank, but not other point features, remove view permissions to the 'points' module and edit the 'Block options' (in the configuration) to not display point details. You cannot remove the points addon if you wish to use ranks.

Note that rank changes are triggered by actions. Someone will not go up in rank based on things like how long they've been a member, until some action (e.g. posting on the forum) triggers a rank recalculation.
[/surround]

[title="2"]The leader-board[/title]

[surround]
[media width="150" description="Options for a points leader-board" float="right"]data_custom/images/docs/tut_points/points_leader_board_config.png[/media]
[media width="150" description="The points leader-board" float="right"]data_custom/images/docs/tut_points/points_leader_board.png[/media]
The leader-board is a block, and corresponding archive viewing module, for the displaying of top point holders. Like rank, this is another incentive for members to earn points.

The module is the [tt]leader_board[/tt] module ([tt]site:leader_board[/tt] page-link, Social > Leader-board on the default menus).

You can create multiple different leader-boards with different options. Some of these options you can set include the following:
 - Number of members to rank on the leader-board
 - Time frame (weekly, monthly, or yearly)
 - Type of leader-board (rank according to total points, or rank according to points earned since the previous time frame)
 - Whether or not to include staff
 - Filter to one or more usergroups
 - The &ldquo;Cycle basis&rdquo;: whether generation is relative to when the leader-board was created or at the start of a time frame (e.g. start of the week / month / year)

Please be aware when you change the options of a leader-board, it only affects future results; it does not re-calculate past results.

The leader-board uses the system scheduler to generate its results. To generate a leader-board, Composr has to first go through all the members to calculate how many points they have. Points are calculated on-the-fly, and its intensive to do this for very large numbers of members. If you are concerned about the leader-board using a lot of server resources when it generates, you could consider limiting it to certain higher usergroups in a rank ladder. This way, effectively only members above a certain point threshold would be considered.
[/surround]

[title="2"]Tenets of the point system[/title]

The point system is designed to provide high levels of transparency, as a legitimate micro-economy. These strict tenets apply even for the highest privileged members.

[title="3"]Public ledger[/title]

Assuming members have the &ldquo;View full points ledger&rdquo; privilege (which they do by default), the ledger is publicly available.

An exception:
Senders are not visible for anonymous transactions unless members have the &ldquo;Trace the origin of anonymous point transactions&rdquo; privilege.

[title="3"]Immutable ledger[/title]

The ledger serves as a transparent and honest record of every point transaction that took place on the website. And members should be able to trace every transaction that took place.

It is not possible to edit transactions, with the exception of the reason text. We carve out this exception because it is important to be able to moderate potentially dangerous or illegal content from any part of a website.

It is not possible to delete transactions; reversals and refunds always result in a new, linked transaction being created to offset the original one.

Even the system maintains the immutability of the ledger.

Of course, a webmaster could always edit the database by hand, but we would discourage this because, unless done under exceptional circumstances, it is a violation of trust.

[title="3"]Transactions cannot involve negative points[/title]

The system does not allow negative points in transactions of any kind. Instead clear positive transactions must be added to the ledger.

[title="3"]Negative balances[/title]

Members can have a negative balance. Various things could put a member into this state (such as a manual debit or charge of more from a member than they have). Nothing the member can directly do themselves can lead to them having a negative balance, however.

Members cannot have negative points in their gift points balance (if gift points are enabled); once the balance reaches 0, their regular points balance will be tapped instead.

[title="2"]Points system implementation details (advanced)[/title]

[title="3"]Points are calculated from the ledger but there is some caching[/title]

[media float="right" thumb="0" framed="0"]data_custom/images/docs/remember.png[/media]
The ledger serves as the real source of truth for calculating how many points a member has. While the number of points a member has in their balance and the number of life-time points a member received is tallied in a custom field, these fields cannot be edited on the UI and only serve as a non-volatile cache.

[title="4"]Syncing issues with Points balance and Life-time points[/title]

It is conceivable for a member's life-time points and/or points balance to get out of sync with the ledger. This would only happen due to a bug or to manipulating the ledger outside of the Composr API (e.g. the database). Should this happen, you can trigger a re-calculation of these values (custom fields) in the Admin Zone > Tools > Cleanup tools and tick (check) &ldquo;Points Cache&rdquo;. Re-calculation is a resource-intensive process and therefore only done when triggered through the Cleanup tools. Otherwise, the custom field values are adjusted when point transactions are made.

[concepts
1_key="Points"                1_value="Points are a virtual currency and economy; members can utilise them for voting power, purchases, rewarding each other, or other things as defined by site staff"
2_key="Gift points"           2_value="Gift points accumulate over time and exist only as points to send to other members where they convert to regular (spendable) points. This is only applicable if they are enabled in the configuration. If not enabled, members can only send each other regular points."
3_key="Life-time points"      3_value="The total number of points a member ever received, but not necessarily the number they have available in their balance; this is mainly used for ranking purposes"
4_key="Points balance"        4_value="The number of points currently available for a member to use"
5_key="Gift Points balance"   5_value="The number of points currently available for a member to send or escrow to other members before that member's regular points balance is tapped into"
6_key="Transact"              6_value="To transfer (move) points from one member (or the system) to another member (or the system)"
7_key="Refund"                7_value="To transact some (or all) of the points from a past transaction back to the sender via a new transaction. The old and new transactions will be linked with each other in the ledger for easy tracking. This is a low-level operation and not available for direct use on the UI."
8_key="Reverse"               8_value="A superset of refund; to refund all of the points from a previous transaction via a new transaction, link both transactions together, and lock the transactions so the reversal cannot be reversed."
9_key="Transaction"           8_value="A single instance of a member or the system transacting points; a single record in the ledger"
10_key="Sender"               10_value="The member who used the points in a transaction"
11_key="Recipient"            11_value="The member who received the points in a transaction"
12_key="Ledger"               12_value="A log of every transaction which occurred on the site"
13_key="Debit"                13_value="To transact points from a member to the system (such as a purchase, but could also include a staff or the system debiting points from a member); a transaction in which points were transacted from a member to the system. The agent is the system or the staff who triggered the debit (e.g. the system debited x points from the member, or the member was debited x points)."
14_key="Charge"               14_value="A subset of debit: to debit points as a punitive action (e.g. warning); a transaction in which a member's points were debited as a punitive action. Charges are always anonymous."
15_key="Spend (points)"       15_value="A synonym of debit, however the agent is the member doing the spending (e.g. the member spent x points)"
16_key="Send (points)"        16_value="To transact points from one member's balance to another member's balance"
17_key="Use (points)"         17_value="An umbrella term to include any action which causes a member's points balance to decrease, such as sending or spending or escrowing points, or being debited or charged points."
18_key="Credit"               18_value="When the system transacts points to a member; a transaction from the system. The agent is the system or the staff who triggered the credit (e.g. the system credited the member x points, or the member was credited x points)."
19_key="Receive (points)"     19_value="When a member is transacted points from another member or the system (credits). The opposite of Use."
20_key="Escrow"               20_value="A written agreement between two members which involves a member-to-member point transaction being held until the agreement is satisfied (after which the other member will receive the points); to make a written agreement with another member and spend points to the system held until both members satisfy the agreement"
21_key="Points Sent"          21_value="A tally of the number of points a member transacted to other members (usually to reward them); the points may originate as either (regular) points or gift points"
22_key="Gift Points Sent"     22_value="A tally of the number of points a member transacted to other members that came from the Gift Points Balance"
23_key="Points Spent"         23_value="A tally of the number of points a member spent or had been debited; this also includes escrowed points"
24_key="Points Used"          24_value="A tally of the number of points a member transacted, whether it was sending or spending or escrowing points, or being debited or charged points."
25_key="Points Received"      25_value="A tally of the number of points transacted to a member from other members or the system (credits). The opposite of Points Used."
26_key="Dispute"              26_value="To mark the agreement of a points escrow as not satisfied according to what was written, thereby requiring review by someone with the privilege to moderate escrows"
27_key="Rank"                 27_value="Rank is a usergroup membership determined by Life-time points, and is a status symbol or a way of assigning greater privileges to higher status members"
28_key="Leader-board"         28_value="The point leader-board shows top members by points using configurable options and is re-calculated on a specified frequency"
29_key="Buildr"               29_value="A Composr addon that provides a simple virtual world environment to interact in; points are the currency of Buildr"
]Concepts[/concepts]

[title="2"]See also[/title]

 - [page="_SEARCH:tut_banners"]Running advertisements (via the banner system)[/page]
 - [page="_SEARCH:tut_downloads"]Providing downloads[/page]
 - [page="_SEARCH:tut_ecommerce"]eCommerce[/page]
 - [page="_SEARCH:tut_forums"]Discussion forums[/page]

{$SET,tutorial_tags,Fun and Games,buildr,ecommerce,community_billboard,points,leader_board,Social,novice}{$SET,tutorial_add_date,Aug 2008}{$SET,tutorial_summary,The points system allows members to earn and spend points, creating a great dynamic. Find out how it works.}[block]main_tutorial_rating[/block]
